(this["webpackJsonpraspberry-vlc"]=this["webpackJsonpraspberry-vlc"]||[]).push([[0],{47:function(e,t,s){},48:function(e,t,s){},87:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s(5),i=s(15),a=s.n(i),l=(s(47),s(48),s(3)),r=s(6),o=s.n(r),u=s(0),d=s(4),j=s(7),b="SELECT_VIDEOSET",O="SET_TITLE_TO_VIDEOSET",f="SET_VIDEO_TO_VIDEOSET",p="SET_BLUR_TO_VIDEOSET",v="ADD_TO_VIDEOSETS",m="REMOVE_FROM_VIDEOSETS",h="SET_DISPLAYS_IPS",x="SET_SAVED_DISPLAYS",S="SET_STATUS_TO_DISPLAYS",g=Object(n.b)((function(e){return{displays:e.displays}}),(function(e){return{setDisplays:function(t){return e(function(e){return{displays:e,type:h}}(t))},setStatusToDisplays:function(t,s){return e(function(e,t){return{ip:e,status:t,type:S}}(t,s))}}}))((function(e){var t=e.displays,s=e.setDisplays,n=e.setStatusToDisplays,i=Object(c.useState)(t[0].ip),a=Object(l.a)(i,2),r=a[0],b=a[1],O=Object(c.useState)(t[1].ip),f=Object(l.a)(O,2),p=f[0],v=f[1],m=Object(c.useState)(t[2].ip),h=Object(l.a)(m,2),x=h[0],S=h[1],g=Object(c.useState)(!1),y=Object(l.a)(g,2),_=y[0],N=y[1],E=Object(c.useState)(!1),T=Object(l.a)(E,2),V=T[0],D=T[1],I=Object(c.useState)(!1),L=Object(l.a)(I,2),w=L[0],C=L[1],k=function(e,c){s(Object(j.a)(t.map((function(s){return t.indexOf(s)===e?Object(d.a)(Object(d.a)({},s),{},{ip:c}):s}))))},F=function(e,t,s){o.a.get("http://".concat(e),{timeout:500}).then((function(c){console.log(c.data),t(!0),s(e,!0)})).catch((function(c){console.log(c),t(!1),s(e,!1)}))};return Object(c.useEffect)((function(){F(r,N,n)}),[r]),Object(c.useEffect)((function(){F(p,D,n)}),[p]),Object(c.useEffect)((function(){F(x,C,n)}),[x]),Object(c.useEffect)((function(){F(r,N,n),F(p,D,n),F(x,C,n)}),[]),Object(u.jsxs)("div",{className:"card endpoint",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label is-small",children:"Display 1:"}),Object(u.jsx)("input",{className:"input is-small ".concat(_?"is-success":"is-danger"),type:"text",value:r,onChange:function(e){b(e.target.value),k(0,e.target.value)}})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label is-small",children:"Display 2:"}),Object(u.jsx)("input",{className:"input is-small ".concat(V?"is-success":"is-danger"),type:"text",value:p,onChange:function(e){v(e.target.value),k(1,e.target.value)}})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label is-small",children:"Display 3:"}),Object(u.jsx)("input",{className:"input is-small ".concat(w?"is-success":"is-danger"),type:"text",value:x,onChange:function(e){S(e.target.value),k(2,e.target.value)}})]})]})})),y=Object(n.b)(null,(function(e){return{addToVideoSets:function(){return e({type:v})}}}))((function(e){var t=e.addToVideoSets;return Object(u.jsx)("a",{className:"panel-block",onClick:t,children:Object(u.jsxs)("span",{class:"icon-text",children:[Object(u.jsx)("span",{class:"icon has-text-link",children:Object(u.jsx)("i",{class:"fas fa-plus"})}),Object(u.jsx)("span",{children:"Add new set"})]})})})),_=s(21),N=s(20),E=Object(n.b)((function(e){return{videosets:e.videosets,displays:e.displays}}),(function(e){return{selectVideoSet:function(t){return e(function(e){return{id:e,type:b}}(t))}}}))((function(e){var t=e.setInfo,s=e.selectVideoSet,c=e.videosets,n=e.displays,i=t.setTitle,a=t.selected,l=t.id;return Object(u.jsxs)("a",{className:"panel-block ".concat(a?"is-active":""),onClick:function(){return s(l)},children:[Object(u.jsx)("p",{children:i}),a&&Object(u.jsxs)("div",{className:"controls",children:[Object(u.jsx)(N.a,{icon:_.a,onClick:function(){var e="",t=c.filter((function(e){return e.selected}))[0];e="http://".concat(n[0].ip,"/api/play"),o.a.post(e,{video:t.videos[0][1],blur:t.blur}),e="http://".concat(n[1].ip,"/api/play"),o.a.post(e,{video:t.videos[1][1],blur:2*t.blur}),e="http://".concat(n[2].ip,"/api/play"),o.a.post(e,{video:t.videos[2][1],blur:2*t.blur})}}),Object(u.jsx)(N.a,{icon:_.b,onClick:function(){var e="";n.forEach((function(t){e="http://".concat(t.ip,"/api/stop"),o.a.get(e)}))}})]})]})})),T=Object(n.b)((function(e){return{videosets:e.videosets}}))((function(e){var t=e.videosets;return Object(u.jsxs)("nav",{className:"panel",children:[Object(u.jsx)("p",{className:"panel-heading",children:" List of sets"}),t.map((function(e){return Object(u.jsx)(E,{setInfo:e})})),Object(u.jsx)(y,{})]})})),V=Object(n.b)((function(e){return{videosets:e.videosets}}),(function(e){return{setBlurToVideoSet:function(t){return e(function(e){return{blur:e,type:p}}(t))}}}))((function(e){var t=e.videosets,s=e.setBlurToVideoSet,n=t.filter((function(e){return 1==e.selected}))[0],i=Object(c.useState)(n.blur),a=Object(l.a)(i,2),r=a[0],o=a[1];Object(c.useEffect)((function(){n=t.filter((function(e){return 1==e.selected}))[0],o(n?n.blur:0)}),[t]);return Object(u.jsx)("div",{className:"blurselector",children:Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"Blur index:"}),Object(u.jsx)("input",{className:"slider",step:"0.1",min:"0",max:"10",value:r,type:"range",onInput:function(e){var t=parseFloat(e.target.value).toFixed(1);o(t),s(t)}}),Object(u.jsx)("p",{children:r})]})})})),D=s(36),I=s.n(D),L=Object(n.b)(null,(function(e){return{setVideoToVideoSet:function(t,s){return e(function(e,t){return{index:e,video:t,type:f}}(t,s))}}}))((function(e){var t=e.box,s=e.display,n=e.setVideoToVideoSet,i=e.selectedVideo,a=Object(c.useState)(i[0]),r=Object(l.a)(a,2),d=r[0],b=r[1],O=Object(c.useState)(i[1]),f=Object(l.a)(O,2),p=f[0],v=f[1],m=Object(c.useState)(""),h=Object(l.a)(m,2),x=h[0],S=h[1],g=Object(c.useState)(!1),y=Object(l.a)(g,2),_=y[0],N=y[1],E=s.ip,T=s.enabled,V=Object(c.useState)([]),D=Object(l.a)(V,2),L=D[0],w=D[1],C=function(e,t){o.a.get("http://".concat(e,"/api/videos"),{timeout:500}).then((function(e){t(e.data),N(e.data.includes(p))})).catch((function(e){t([]),N(!1)}))},k=function(e){var s=e.target.files[0],c=URL.createObjectURL(s),i=s.name;S(e.target.files[0]),b(c),v(i),n(t,[c,i])};return Object(c.useEffect)((function(){document.querySelector(".videofile"+t).addEventListener("change",k,!1),C(E,w)}),[]),Object(c.useEffect)((function(){C(E,w),N(L.includes(p))}),[p]),Object(c.useEffect)((function(){b(i?i[0]:""),v(i?i[1]:""),C(E,w)}),[i]),Object(u.jsxs)("div",{className:"card column is-one-third videoselector",children:[Object(u.jsx)("div",{className:"card-image",children:Object(u.jsx)(I.a,{url:d,playing:!1,controls:!0,width:"100%",height:"50vh"})}),Object(u.jsxs)("div",{className:"card-footer",children:[Object(u.jsx)("div",{className:"file has-name file-selector",children:Object(u.jsxs)("label",{className:"file-label",children:[Object(u.jsx)("input",{className:"file-input videofile"+t,type:"file",name:"resume"}),Object(u.jsx)("span",{className:"file-cta",children:Object(u.jsx)("span",{className:"file-icon has-text-success",children:Object(u.jsx)("i",{className:"fas fa-upload"})})}),Object(u.jsx)("span",{className:"file-name",children:p})]})}),Object(u.jsx)("button",{className:"button card-footer-item is-outlined ".concat(_&&p?"is-danger":"is-success"),onClick:function(e){var t="http://".concat(E,"/api/videos");if(T&&_&&(e.target.classList.add("is-loading"),o.a.delete(t+"/"+p).then((function(){var t=L.indexOf(p),s=Object(j.a)(L);s.splice(t,1),w(s),b(""),v(""),e.target.classList.remove("is-loading")}),(function(t){console.error(t),e.target.classList.remove("is-loading")}))),T&&!_){var s=new FormData;s.append("sampleFile",x),console.log("___ FILE ___"),console.log(x),console.log("________________"),e.target.classList.add("is-loading"),o.a.post(t,s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){var t=Object(j.a)(L);t.push(p),w(t),N(!0),e.target.classList.remove("is-loading")}),(function(t){console.error(t),e.target.classList.remove("is-loading")}))}},disabled:!_&&!x||!T,children:_?"Delete":"Upload"})]})]})})),w=Object(n.b)((function(e){return{videosets:e.videosets,displays:e.displays}}),(function(e){return{setTitleToVideoSet:function(t,s){return e(function(e,t){return{id:e,title:t,type:O}}(t,s))},removeFromVideoSets:function(t){return e(function(e){return{id:e,type:m}}(t))}}}))((function(e){var t=e.displays,s=e.videosets,n=e.setTitleToVideoSet,i=e.removeFromVideoSets,a=s.find((function(e){return 1==e.selected})),r=Object(c.useState)(a?a.setTitle:""),o=Object(l.a)(r,2),d=o[0],j=o[1],b=Object(c.useState)(a?a.id:""),O=Object(l.a)(b,2),f=O[0],p=O[1],v=Object(c.useState)(a.videos?a.videos:[]),m=Object(l.a)(v,2),h=m[0],x=m[1];return Object(c.useEffect)((function(){a=s.find((function(e){return!0===e.selected})),j(a?a.setTitle:""),x(a.videos?a.videos:[])}),[s]),Object(c.useEffect)((function(){p(a?a.id:"")}),[d]),Object(u.jsx)("div",{children:a&&Object(u.jsxs)("div",{className:"details",children:[Object(u.jsx)("input",{type:"text",value:d,className:"title title-input",onChange:function(e){j(e.target.value),n(a.id,e.target.value)}}),Object(u.jsxs)("div",{className:"columns",children:[Object(u.jsx)(L,{selectedVideo:h[0],setid:f,box:"0",display:t[0]}),Object(u.jsx)(L,{selectedVideo:h[1],setid:f,box:"1",display:t[1]}),Object(u.jsx)(L,{selectedVideo:h[2],setid:f,box:"2",display:t[2]})]}),Object(u.jsx)(V,{}),Object(u.jsx)("span",{className:"icon has-text-danger delete-set",onClick:function(){return i(a.id)},children:Object(u.jsx)("i",{className:"fas fa-trash"})})]})})})),C=function(){return Object(u.jsxs)("div",{className:"columns",children:[Object(u.jsxs)("div",{className:"column is-one-quarter",children:[Object(u.jsx)(T,{}),Object(u.jsx)(g,{})]}),Object(u.jsx)("div",{className:"column",children:Object(u.jsx)(w,{setTitle:"The Beautiful Mountains"})})]})},k=s(12),F=function(){var e=[{ip:"",enabled:!1,saved:[]},{ip:"",enabled:!1,saved:[]},{ip:"",enabled:!1,saved:[]}],t=localStorage.getItem("displays");return t?(t=JSON.parse(t),e.map((function(s){return Object(d.a)(Object(d.a)({},s),{},{ip:t[e.indexOf(s)].ip})}))):(localStorage.setItem("displays",JSON.stringify(e.map((function(e){return{ip:e.ip}})))),e)},A=function(e){localStorage.setItem("displays",JSON.stringify(e.map((function(e){return{ip:e.ip}}))))},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return A(t.displays),t.displays;case x:var s=Object(j.a)(e);return s.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{saved:e.ip===t.ip?t.saved:e.saved})}));case S:var c=Object(j.a)(e);return c.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{enabled:e.ip===t.ip?t.status:e.enabled})}));default:return e}},R=function(){var e=localStorage.getItem("videosets");return e?JSON.parse(e):(e=[{id:Date.now(),setTitle:"New video set",videos:["","",""],blur:0,selected:!0}],U(e),e)},U=function(e){localStorage.setItem("videosets",JSON.stringify(e))},B=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R(),s=arguments.length>1?arguments[1]:void 0;switch(s.type){case v:var c=t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{selected:!1})}));return e=[].concat(Object(j.a)(c),[{id:Date.now(),setTitle:"New video set",videos:["","",""],blur:0,selected:!0}]),U(e),e;case m:var n=Object(j.a)(t);if(n.length>1){var i=!1;return n.forEach((function(e){i||e.id==s.id||(e.selected=!0,i=!0)})),e=Object(j.a)(n.filter((function(e){return e.id!==s.id}))),U(e),e}return t;case b:return e=Object(j.a)(t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{selected:e.id==s.id})}))),U(e),e;case O:return e=Object(j.a)(t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{setTitle:e.id==s.id?s.title:e.setTitle})}))),U(e),e;case f:var a=t.filter((function(e){return 1==e.selected}))[0];a.videos[s.index]=s.video;var l=a.videos;return e=Object(j.a)(t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{videos:1==e.selected?l:e.videos})}))),U(e),e;case p:var r=t.filter((function(e){return 1==e.selected}))[0];r.blur=s.blur;var o=r.blur;return e=Object(j.a)(t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{blur:1==e.selected?o:e.blur})}))),U(e),e;default:return t}},P=Object(k.b)({displays:J,videosets:B}),X=Object(k.c)(P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(u.jsx)(n.a,{store:X,children:Object(u.jsx)(C,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.961ed759.chunk.js.map